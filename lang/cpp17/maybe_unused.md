# [[maybe_unused]]å±æ€§
* cpp17[meta cpp]

## æ¦‚è¦

`[[maybe_unused]]`å±æ€§ã¯æ„å›³çš„ã«æœªä½¿ç”¨ã®è¦ç´ ã‚’å®šç¾©ã—ã¦ã„ã‚‹ã“ã¨ã‚’ã‚³ãƒ³ãƒ‘ã‚¤ãƒ©ã«ä¼ãˆã€è¦å‘Šã‚’æŠ‘åˆ¶ã™ã‚‹ãŸã‚ã®å±æ€§ã§ã‚ã‚‹ã€‚

ã‚³ãƒ³ãƒ‘ã‚¤ãƒ©ã¯ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«æ™‚ã«æœªä½¿ç”¨ã®è¦ç´ ï¼ˆå¤‰æ•°ã‚„é–¢æ•°ãªã©ï¼‰ã‚’æ¤œå‡ºã—ã¦è¦å‘Šã‚’å‡ºåŠ›ã™ã‚‹å ´åˆãŒã‚ã‚‹ã€‚

ãƒ—ãƒã‚°ãƒ©ãƒãŒæ„å›³ã—ã¦æœªä½¿ç”¨ã®è¦ç´ ã‚’å®šç¾©ã™ã‚‹å ´åˆã€ã‚³ãƒ³ãƒ‘ã‚¤ãƒ©ã®è¦å‘Šã¯ç„¡ç”¨ã§ã‚ã‚‹ã€‚ã—ã‹ã—å¾“æ¥ã¯è¦å‘Šã‚’æŠ‘åˆ¶ã™ã‚‹æ–¹æ³•ãŒç„¡ã„ã‹ã€ã‚ã£ã¦ã‚‚ã‚³ãƒ³ãƒ‘ã‚¤ãƒ©ã”ã¨ã«æ–¹æ³•ãŒç•°ãªã£ã¦ã„ãŸã€‚C++17ã§ã¯`[[maybe_unused]]`å±æ€§ã«ã‚ˆã‚Šæ„å›³ã—ã¦æœªä½¿ç”¨ã®è¦ç´ ã‚’å®šç¾©ã—ã¦ã„ã‚‹ã“ã¨ã‚’ã‚³ãƒ³ãƒ‘ã‚¤ãƒ©ã«ä¼ãˆã€è¦å‘Šã‚’æŠ‘åˆ¶ã™ã‚‹ã“ã¨ãŒã§ãã‚‹ã€‚

## ä»•æ§˜

`[[maybe_unused]]`å±æ€§ã¯ã€ä»¥ä¸‹ã®è¦ç´ ã«å¯¾ã—ã¦æŒ‡å®šã§ãã‚‹ã€‚

* ã‚¯ãƒ©ã‚¹ã®å®£è¨€
* å‹ã®åˆ¥åå®£è¨€
* å¤‰æ•°ã®å®£è¨€
* éé™çš„ãƒ¡ãƒ³ãƒå¤‰æ•°ã®å®£è¨€
* é–¢æ•°ã®å®£è¨€
* åˆ—æŒ™å‹ã®å®£è¨€
* åˆ—æŒ™å

### ã‚¯ãƒ©ã‚¹å®£è¨€ã§ã®æŒ‡å®š
ã‚¯ãƒ©ã‚¹å®£è¨€ã§ã¯ã€`class`ï¼`struct`ã‚ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã¨ã‚¯ãƒ©ã‚¹åã®é–“ã«`[[maybe_unused]]`å±æ€§ã‚’æŒ‡å®šã™ã‚‹ã€‚

```cpp
class [[maybe_unused]] X;
```

### å‹ã®åˆ¥åå®£è¨€ã§ã®æŒ‡å®š
`using`ã‚ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã«ã‚ˆã‚‹å‹ã®åˆ¥åå®£è¨€ã®å ´åˆã¯ã€`=`ã®å‰ã«`[[maybe_unused]]`å±æ€§ã‚’æŒ‡å®šã™ã‚‹ã€‚

```cpp
using integer [[maybe_unused]] = int;
```

`typedef`ã‚ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã«ã‚ˆã‚‹å‹ã®åˆ¥åå®£è¨€ã®å ´åˆã¯ã€`typedef`ã‚ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã®å‰ã«`[[maybe_unused]]`å±æ€§ã‚’æŒ‡å®šã™ã‚‹ã€‚

```cpp
[[maybe_unused]] typedef int integer;
```

### å¤‰æ•°å®£è¨€ã§ã®æŒ‡å®š
å¤‰æ•°å®£è¨€ã§ã¯ã€å…ˆé ã«`[[maybe_unused]]`å±æ€§ã‚’æŒ‡å®šã™ã‚‹ã€‚ã“ã‚Œã¯ã€å‹ã€CVä¿®é£¾ã€è¨˜æ†¶åŸŸæŒ‡å®šã‚ˆã‚Šã‚‚å‰ã§ã‚ã‚‹ã€‚

```cpp
[[maybe_unused]] int x = 0;
```

### é–¢æ•°å®£è¨€ã§ã®æŒ‡å®š
é–¢æ•°å®£è¨€ã§ã¯ã€å…ˆé ã«`[[maybe_unused]]`å±æ€§ã‚’æŒ‡å®šã™ã‚‹ã€‚ã“ã‚Œã¯ã€æˆ»ã‚Šå€¤ã®å‹ã€ãƒªãƒ³ã‚±ãƒ¼ã‚¸æŒ‡å®šã‚ˆã‚Šã‚‚å‰ã§ã‚ã‚‹ã€‚ãŸã ã—ã€é–¢æ•°ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã®å ´åˆã«ã¯ã€ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿å®£è¨€ã®å¾Œã‚ã«`[[maybe_unused]]`å±æ€§ã‚’æŒ‡å®šã™ã‚‹ã€‚

```cpp
[[maybe_unused]] void f();

template <class T>
[[maybe_unused]]
inline void f();
```

### åˆ—æŒ™å‹ã¨åˆ—æŒ™åã§ã®æŒ‡å®š
åˆ—æŒ™å‹ã§ã¯ã€ã‚¯ãƒ©ã‚¹ã¨åŒæ§˜ã«`enum`ï¼`enum class`ã¨å‹åã®é–“ã«`[[maybe_unused]]`å±æ€§ã‚’æŒ‡å®šã™ã‚‹ã€‚

åˆ—æŒ™åã§ã¯ã€åˆ—æŒ™åã®è˜åˆ¥åã¨ã‚«ãƒ³ãƒã®é–“ã«`[[maybe_unused]]`å±æ€§ã‚’æŒ‡å®šã™ã‚‹ã€‚

```cpp
enum class [[maybe_unused]] E {
  A [[maybe_unused]],
  B
};
```


## ä¾‹
```cpp example
#define NDEBUG
#include <cassert>

//è¦å‘Šã¯ç™ºç”Ÿã—ãªã„
[[maybe_unused]] void f([[maybe_unused]] bool flag1,
                        [[maybe_unused]] bool flag2) {
  [[maybe_unused]] bool b = flag1 && flag2;
  assert(b);
}

//è¦å‘ŠãŒç™ºç”Ÿã™ã‚‹å ´åˆãŒã‚ã‚‹
void g(bool flag3, bool flag4) {
  bool b2 = flag3 && flag4;
  assert(b2);
}

int main() {
  f(true, true);
  g(true, true);
}
```

### å‡ºåŠ›
```
```

### è¦å‘Šä¾‹
clang++ 5.0.0ã€`-Wall -DNDEBUG` ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã§ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã—ãŸå ´åˆ:
```
maybe_unused.cpp:12:8: warning: unused variable 'b2' [-Wunused-variable]
  bool b2 = thing3 && thing4;
       ^
1 warning generated.
```

## æ¤œè¨ã•ã‚ŒãŸã»ã‹ã®é¸æŠè‚¢

P0068R0ã§ã¯`[[unused]]`ã¨ã„ã†åå‰ã§ææ¡ˆã•ã‚ŒãŸãŒã€ã„ã‚ã‚†ã‚‹è‡ªè»¢è»Šç½®ãå ´ã®è°è«–ã®æœ«ã®æŠ•ç¥¨ã«ã‚ˆã£ã¦ã€æ¡ç”¨ã•ã‚ŒãŸåå‰ã¯`[[maybe_unused]]`ã«ãªã£ãŸã€‚

## é–¢é€£é …ç›®
- [C++11 å±æ€§æ§‹æ–‡](/lang/cpp11/attributes.md)

## å‚ç…§
- [P0068R0 Proposal of &#91;&#91;unused&#93;&#93;, &#91;&#91;nodiscard&#93;&#93; and &#91;&#91;fallthrough&#93;&#93; attributes.](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2015/p0068r0.pdf)
- [P0212R1 Wording for [[maybe_unused]] attribute.](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2016/p0212r1.pdf)
